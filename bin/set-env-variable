#!/usr/bin/env python3
import asyncio
import argparse

# The path to import libraries need to be included
import os
SYSADMINTOOLS_DIR = os.getenv('SYSADMINTOOLS_DIR')
import sys; sys.path.insert(1, f'{SYSADMINTOOLS_DIR}/lib')
from AWS import AWS as A


## Parse command arguments
parser = argparse.ArgumentParser()
parser.add_argument('-n', '--name',
    help='Name of the variable. Required argument.',  
    metavar=''
)
parser.add_argument('-v', '--value', 
    help='Value of the variable. Required argument',  
    metavar=''
)
parser.add_argument('-d', '--desc', 
    help='Description of the variable. Required argument.',  
    metavar=''
)
parser.add_argument('-t', '--type', 
    help='Type of variable. Optional argument. Default is SecureString. Values: String|StringList|SecureString',  
    default='SecureString',
    metavar=''
)
parser.add_argument('-o', '--overwrite', 
    help='Whether or not to overwrite the previous value, if it exists. Optional argument. Default is False. Values: True|False. ',  
    default=False,
    metavar=''
)
args = parser.parse_args()
if not args.name or not args.value or not args.desc:
    print('You have not entered the required arguments. Use --help for more information')
    quit()

AWS = A()
res = AWS.setEnvVariable(args.name, args.value, args.desc, args.type, args.overwrite == 'True')

print(res)